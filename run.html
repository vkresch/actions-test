

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>How to run TRD? &mdash; Tezos Reward Distributor (TRD) 9.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Plugins" href="plugins.html" />
    <link rel="prev" title="Tezos Signer with Docker (WIP)" href="tezossignerdocker.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Tezos Reward Distributor (TRD)
          

          
          </a>

          
            
            
              <div class="version">
                9.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Content:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">How to get and install TRD?</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">How to configure TRD?</a></li>
<li class="toctree-l1"><a class="reference internal" href="paymentaddress.html">Payment Address</a></li>
<li class="toctree-l1"><a class="reference internal" href="tezossigner.html">How to use the Tezos Signer</a></li>
<li class="toctree-l1"><a class="reference internal" href="tezossignerdocker.html">Tezos Signer with Docker (WIP)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to run TRD?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-usage">Command Line Usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="linuxservice.html">Run as Linux Service (WIP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="statistics.html">Anonymous Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="codeofconduct.html">Contributor Covenant Code of Conduct</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Tezos Reward Distributor (TRD)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>How to run TRD?</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/run.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-run-trd">
<h1>How to run TRD?<a class="headerlink" href="#how-to-run-trd" title="Permalink to this headline">¶</a></h1>
<div class="section" id="command-line-usage">
<h2>Command Line Usage<a class="headerlink" href="#command-line-usage" title="Permalink to this headline">¶</a></h2>
<p>The TRD can run with the following parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">C</span> <span class="n">INITIAL_CYCLE</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">M</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">}]</span> <span class="p">[</span><span class="o">-</span><span class="n">R</span> <span class="n">RELEASE_OVERRIDE</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">O</span> <span class="n">PAYMENT_OFFSET</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">N</span> <span class="p">{</span><span class="n">MAINNET</span><span class="p">,</span><span class="n">DELPHINET</span><span class="p">}]</span> <span class="p">[</span><span class="o">-</span><span class="n">A</span> <span class="n">NODE_ENDPOINT</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">P</span> <span class="p">{</span><span class="n">rpc</span><span class="p">,</span><span class="n">prpc</span><span class="p">,</span><span class="n">tzstats</span><span class="p">,</span><span class="n">tzkt</span><span class="p">}]</span> <span class="p">[</span><span class="o">-</span><span class="n">Ap</span> <span class="n">NODE_ADDR_PUBLIC</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">r</span> <span class="n">REPORTS_BASE</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">f</span> <span class="n">CONFIG_DIR</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">D</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">Dc</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">E</span> <span class="n">SIGNER_ENDPOINT</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">d</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">s</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">Dp</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">V</span> <span class="p">{</span><span class="n">on</span><span class="p">,</span><span class="n">off</span><span class="p">}]</span> <span class="p">[</span><span class="o">-</span><span class="n">U</span> <span class="n">API_BASE_URL</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">inj</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">syslog</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">file</span> <span class="n">LOG_FILE</span><span class="p">]</span>
</pre></div>
</div>
<p>It is adviseable to use the argument “-V on” in every run because it makes debugging easier.
The most common use case is to run in mainnet and start to make payouts from last released rewards or continue making payouts from the cycle last payment is done:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">V</span> <span class="n">on</span>
</pre></div>
</div>
<p>Make payouts for a single cycle (300) and exit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">C</span> <span class="mi">300</span> <span class="o">-</span><span class="n">M</span> <span class="mi">3</span> <span class="o">-</span><span class="n">V</span> <span class="n">on</span>
</pre></div>
</div>
<p>Make all pending payouts and exit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">M</span> <span class="mi">2</span> <span class="o">-</span><span class="n">V</span> <span class="n">on</span>
</pre></div>
</div>
<p>Make pending payouts beginning from a cycle and exit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">C</span> <span class="mi">300</span> <span class="o">-</span><span class="n">M</span> <span class="mi">2</span> <span class="o">-</span><span class="n">V</span> <span class="n">on</span>
</pre></div>
</div>
<p>Run in dry-run mode in delphinet, make payouts from cycle 300 and exit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">D</span> <span class="o">-</span><span class="n">N</span> <span class="n">DELPHINET</span> <span class="o">-</span><span class="n">C</span> <span class="mi">300</span> <span class="o">-</span><span class="n">M</span> <span class="mi">3</span> <span class="o">-</span><span class="n">V</span> <span class="n">on</span>
</pre></div>
</div>
<p>Run in dry-run mode in mainnet, make payouts from cycle 300 onwards, for calculations use data provided by tezos node rpc interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">C</span> <span class="mi">300</span> <span class="o">-</span><span class="n">P</span> <span class="n">rpc</span> <span class="o">-</span><span class="n">D</span> <span class="o">-</span><span class="n">V</span> <span class="n">on</span>
</pre></div>
</div>
<p>Run in dry-run mode in mainnet, make payouts for cycle 300, for calculations use data provided by the tzkt API:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">C</span> <span class="mi">300</span> <span class="o">-</span><span class="n">P</span> <span class="n">tzkt</span> <span class="o">-</span><span class="n">M</span> <span class="mi">3</span> <span class="o">-</span><span class="n">V</span> <span class="n">on</span> <span class="o">-</span><span class="n">D</span>
</pre></div>
</div>
<p>Run in dry-run mode in mainnet, retry failed payouts for cycle 300, for calculations use data provided by the tzstats API:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">C</span> <span class="mi">300</span> <span class="o">-</span><span class="n">P</span> <span class="n">tzstats</span> <span class="o">-</span><span class="n">M</span> <span class="mi">4</span> <span class="o">-</span><span class="n">V</span> <span class="n">on</span> <span class="o">-</span><span class="n">D</span>
</pre></div>
</div>
<p>For help, run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">h</span>
</pre></div>
</div>
<p>Explaination of individual arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">h</span>                          <span class="c1"># show help message and exit</span>
<span class="o">-</span><span class="n">C</span> <span class="n">INITIAL_CYCLE</span>            <span class="c1"># First cycle to start payment. For last released rewards, set to 0. Non-positive values are interpreted as: current cycle - abs(initial_cycle) - (NB_FREEZE_CYCLE+1). If not set</span>
                            <span class="c1"># application will continue from last payment made or last reward released.</span>
<span class="o">-</span><span class="n">M</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span>                <span class="c1"># Waiting decision after making pending payments. 1: default option. Run forever. 2: Run all pending payments and exit. 3: Run for one cycle and exit. Suitable to use with -C option.</span>
                            <span class="c1"># 4: Retry failed payments and exit</span>
<span class="o">-</span><span class="n">R</span> <span class="n">RELEASE_OVERRIDE</span>         <span class="c1"># Override NB_FREEZE_CYCLE value. last released payment cycle will be (current_cycle-(NB_FREEZE_CYCLE+1)-release_override). Suitable for future payments. For future payments give</span>
                            <span class="c1"># negative values. Valid range is [-11,)</span>
<span class="o">-</span><span class="n">O</span> <span class="n">PAYMENT_OFFSET</span>           <span class="c1"># Number of blocks to wait after a cycle starts before starting payments. This can be useful because cycle beginnings may be busy.</span>
<span class="o">-</span><span class="n">N</span> <span class="p">{</span><span class="n">MAINNET</span><span class="p">,</span><span class="n">DELPHINET</span><span class="p">}</span>      <span class="c1"># Network name. Default is MAINNET. The current test network of tezos is DELPHINET.</span>
<span class="o">-</span><span class="n">A</span> <span class="n">NODE_ENDPOINT</span>            <span class="c1"># Node (host:port pair) potentially with protocol prefix especially if tls encryption is used. Default is http://127.0.0.1:8732. This is the main Tezos node used by the client for</span>
                            <span class="c1"># rpc queries and operation injections.</span>
<span class="o">-</span><span class="n">P</span> <span class="p">{</span><span class="n">rpc</span><span class="p">,</span><span class="n">prpc</span><span class="p">,</span><span class="n">tzstats</span><span class="p">,</span><span class="n">tzkt</span><span class="p">}</span>  <span class="c1"># Source of reward data. The default is the use of a public archive rpc node, https://mainnet-tezos.giganode.io, to query all needed data for reward calculations. If you prefer to</span>
                            <span class="c1"># use your own local node defined with the -A flag for getting reward data please set the provider to rpc (the local node MUST be an ARCHIVE node in this case). If you prefer using a</span>
                            <span class="c1"># public rpc node, please set the node URL using the -Ap flag. An alternative for providing reward data is tzstats, but pay attention for license in case of COMMERCIAL use!</span>
<span class="o">-</span><span class="n">Ap</span> <span class="n">NODE_ADDR_PUBLIC</span>        <span class="c1"># Public node base URL. This argument will only be used in case the provider is set to prpc. This node will only be used to query reward data and delegator list. It must be an</span>
                            <span class="c1"># ARCHIVE node. (Default is https://mainnet-tezos.giganode.io)</span>
<span class="o">-</span><span class="n">r</span> <span class="n">REPORTS_BASE</span>             <span class="c1"># Directory to create reports</span>
<span class="o">-</span><span class="n">f</span> <span class="n">CONFIG_DIR</span>               <span class="c1"># Directory to find baking configuration</span>
<span class="o">-</span><span class="n">D</span>                          <span class="c1"># Run without injecting payments. Suitable for testing. Does not require locking.</span>
<span class="o">-</span><span class="n">Dc</span>                         <span class="c1"># Run without any consumers. Suitable for testing. Does not require locking.</span>
<span class="o">-</span><span class="n">E</span> <span class="n">SIGNER_ENDPOINT</span>          <span class="c1"># URL used by the Tezos-signer to accept HTTP requests.</span>
<span class="o">-</span><span class="n">d</span>                          <span class="c1"># Docker installation flag. When set, docker script location should be set in -E</span>
<span class="o">-</span><span class="n">s</span>                          <span class="c1"># Marker to indicate that TRD is running in daemon mode. When not given it indicates that TRD is in interactive mode.</span>
<span class="o">-</span><span class="n">Dp</span>                         <span class="c1"># Do not publish anonymous usage statistics</span>
<span class="o">-</span><span class="n">V</span> <span class="p">{</span><span class="n">on</span><span class="p">,</span><span class="n">off</span><span class="p">}</span>                 <span class="c1"># Produces a lot of logs. Good for trouble shooting. Verbose logs go into app_verbose log file. App verbose log file is named with cycle number and creation date. For each cycle a</span>
                            <span class="c1"># new file is created and old file is moved to archive_backup directory after being zipped.</span>
<span class="o">-</span><span class="n">U</span> <span class="n">API_BASE_URL</span>             <span class="c1"># Base API url for non-rpc providers. If not set, public endpoints will be used.</span>
<span class="o">-</span><span class="n">inj</span>                        <span class="c1"># Try to pay injected payment items. Use this option only if you are sure that payment items were injected but not actually paid.</span>
<span class="o">--</span><span class="n">syslog</span>                    <span class="c1"># Log to syslog. Useful in daemon mode.</span>
<span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">file</span> <span class="n">LOG_FILE</span>         <span class="c1"># Log output file</span>
</pre></div>
</div>
<p>Most arguements also have a verbose arguments if you prefer to work with those. You can find the verbose arguements in the help message.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="plugins.html" class="btn btn-neutral float-right" title="Plugins" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="tezossignerdocker.html" class="btn btn-neutral float-left" title="Tezos Signer with Docker (WIP)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, habanoz, utdrmac, amzid, jdsika, dansan566.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>